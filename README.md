# Serverless AWS Node js Application

This repository contains Nodejs application performing CRUD (Creare,retrieve,update and delete) with Dynamo DB.
[Serverless Framework](https://www.serverless.com/) havebeen used to deploy the application in AWS. 
A good application to kick start your journey with Serverless framework with node.js.

### Prerequisites

Prerequisites to development include: 

* Node.js 12.x
* Yarn or npm
* [Serverless Framework](https://www.serverless.com/)

### Install serverless 
npm install -g serverless

### Initial configuration
Download the repository using ssh or https.
Run

```
yarn install
```
or 
```
npm install
```
to ensure all dependencies are brought in.

### AWS profiling
You can avoid this step if you deal with single account.
For developers who deals with multiple account,create [AWS Profiling](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html).
Update your credential file by navigating as shown below.
```
cat ~/.aws/credentials
```
Add below profile.This is applicable if you are dealing with multiple aws account.
```
[serverless-demo]
aws_access_key_id= <KEY>
aws_secret_access_key= <SECRET_KEY>
region=us-east-1
```
###  Deploy serverless template
Run the below command (I am assuming deployment is in dev environment.It could be any stage.)
```
serverless deploy --aws-profile serverless-demo --stage dev
```
or Without profiling. It will take default aws credentials you have setup for your system.
```
serverless deploy --stage dev
```
### testing
- Go to test.http file and update with endpoints generated by deploying serverless template.
  In my case it serverless output looks like below.
```
......................................
Serverless: Stack update finished...
Service Information
service: serverless-demo-p1
stage: dev
region: us-east-1
stack: serverless-demo-p1-dev
resources: 34
api keys:
  None
endpoints:
  POST - https://t35q0s5xsk.execute-api.us-east-1.amazonaws.com/dev/v1/student
  GET - https://t35q0s5xsk.execute-api.us-east-1.amazonaws.com/dev/v1/student
  GET - https://t35q0s5xsk.execute-api.us-east-1.amazonaws.com/dev/v1/student/{name}
  PUT - https://t35q0s5xsk.execute-api.us-east-1.amazonaws.com/dev/v1/student/{name}
  DELETE - https://t35q0s5xsk.execute-api.us-east-1.amazonaws.com/dev/v1/student/{name}
functions:
  create: serverless-demo-p1-dev-create
  list: serverless-demo-p1-dev-list
  get: serverless-demo-p1-dev-get
  update: serverless-demo-p1-dev-update
  delete: serverless-demo-p1-dev-delete
layers:
  None

```
- Run the api by selecting the api.Sample data is available in test.http file.
  (node-rest-client plugin is used).
###  Remove serverless template

Run the below command (I am assuming we are deploying in dev environment.It could be any stage.)
```
serverless remove --aws-profile serverless-demo --stage dev
```
or Without profiling.It will take default aws credentials you have setup for your system.
```
serverless remove --stage dev
```
